<ion-content overflow-scroll="true" [scrollEvents]="true" (ionScroll)="detectScroll($event)">
  <app-ordo-header />
  <div style="padding-top: 70px; text-align: center;">
    @if ( this.loading ) {
      <ion-spinner></ion-spinner>
      <p style="padding-top: 20px;">Loading...</p>
    } @else if ( this.error ) {
      <p>Ordo could not be fetched.</p>
    } @else if ( !this.loading && !this.error ) {
      <div class="btn-group">
        <ion-list>
          <ion-item>
            <ion-select aria-label="Ordo Year" [ngModel]="year" (ionChange)="UpdateYear($event)">
              @for ( index of this.YearRange(); track index ) {
                <ion-select-option value="{{index}}">{{index}}</ion-select-option>
              }
            </ion-select>
          </ion-item>
        </ion-list>
        <ion-list>
          <ion-item>
            <ion-select aria-label="Ordo Language" [ngModel]="language" (ionChange)="UpdateLanguage($event)">
              @for ( index of this.languages; track index ) {
                <ion-select-option value="{{index}}">{{index}}</ion-select-option>
              }
            </ion-select>
          </ion-item>
        </ion-list>
      </div>
      <div style="margin: 30px;">
        @for ( month of months; track month ) {
          <span>
            <a href="javascript:void(0)" (click)="GoTo('#' + month.substring(0,3))" class="link-primary" style="text-decoration: none; margin: 5; font-size: large;">{{month}}</a>
            @if ( month !== "December" ) {
              &nbsp;&nbsp;
            }
          </span>
        }
      </div>
      @for ( month of this.ordo [ this.year ]; track month ) {
        <div class="section" id="{{month [ 0 ].date.month}}" [style.padding-top]="(month [ 0 ].date.month==='Jan') ? 0 : 30" style="text-align: left;">
          <div class="container">
            @for ( day of month; track day ) {
              <div class="card mb-3" style="cursor: pointer; border: 1px solid var(--bs-emphasis-color);">
                <div class="row g-0 rounded-2">
                  <div class="col-md-4">
                    <div class="img-fluid h-100 h2 date-field" [class.today]="isToday ( day.date )" id="{{isToday ( day.date ) ? 'today' : ''}}">
                      <div class="h-100" style="display: flex; justify-content: center; align-items: center; color: white; font-weight: bold;">
                        <p style="text-align: center; margin: 0;">{{day.date.weekday}} {{day.date.day}}<br />{{day.date.month}}</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-7">
                    <div class="card-body">
                      @for ( celeb of day.celebrations; track celeb ) {
                        <div>
                          <div style="display: flex; align-items: baseline;">
                            <h5 class="card-title">
                              <strong>
                                {{celeb.title}}&nbsp;
                                <span class="dot" [style.color]="this.getForegroundColor(celeb.colors)" [style.background-color]="this.translateColor(celeb.colors)"></span>
                              </strong>
                            </h5>
                          </div>
                          @for ( commem of celeb.commemorations; track commem ) {
                            <div style="display: flex;  align-items: baseline;">
                              <h5 class="card-title" style="font-size: 13px">
                                <strong>
                                  {{commem.title}}&nbsp;
                                  <span class="dot" [style.color]="this.getForegroundColor(commem.colors)" [style.background-color]="this.translateColor(commem.colors)"></span>
                                </strong>
                              </h5>
                            </div>
                          }
                        </div>
                        <p class="card-text mb-1" style="white-space: pre-wrap;">Class {{celeb.rank}}</p>
                        <p class="card-text mb-2" style="white-space: pre-wrap;">{{celeb.options}}</p>
                        <a class="btn btn-primary m-0 mb-4" style="background-color: var(--bs-primary);" href="javascript:void(0)" (click)="OpenPropers(celeb)">
                          Open Propers
                        </a>
                      }
                      <div style="margin-top: 10px;">
                        <span class="badge card-text" [style.background-color]="this.translateColor(day.season.colors)" [style.color]="this.getForegroundColor(day.season.colors)">{{day.season.title}}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }
      @if ( this.windowScrolled ) {
        <div class="scroll-to-top">
          <button type="button" class="btn btn-danger" data-toggle="button" aria-pressed="true" (click)="scrollToTop()">
            <fa-icon [icon]="faArrow" />
          </button>
        </div>
        <div class="scroll-to-today">
          <button type="button" class="btn btn-danger" data-toggle="button" aria-pressed="true" (click)="this.GoTo('#today')">
            Go To Today
          </button>
        </div>
      }
    }
  </div>
</ion-content>